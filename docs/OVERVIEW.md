# Credo Protocol: Technical Overview & Architecture

**Decentralized Trust for Capital**

---

## Executive Summary

Credo Protocol is a groundbreaking DeFi lending platform on Moca Chain that shifts the paradigm from **asset-backed** to **identity-backed** lending. By leveraging Verifiable Credentials (VCs) and Zero-Knowledge Proofs, we enable undercollateralized loans based on a user's verifiable reputation, not just their existing wealth.

---

## Moca Network SDK Features Integration

### AIR Account Services
Provides seamless and secure user onboarding and login via Web3 Single Sign-On (SSO). This is the user's gateway to the protocol, offering:
- One-click authentication with Moca ID
- Secure, familiar popup-based login flow
- No complex seed phrase management for users
- Seamless integration with the Moca ecosystem

### AIR Credential Services
Enables users to request, hold, and present privacy-preserving Verifiable Credentials (VCs) from various data sources. This is the core engine for generating credit scores:
- Structured VC issuance and signing
- Zero-Knowledge Proof capabilities
- Cryptographic verification of credentials
- Privacy-preserving data attestation

---

## 1. Innovation & Novelty (25%)

Credo Protocol moves beyond the established DeFi lending model, which is fundamentally limited by over-collateralization. While protocols like Aave and Compound are capital-efficient for crypto-native users, they cannot serve as a true source of credit for the broader population.

### Our Core Innovations

#### From Asset-Backed to Identity-Backed
We are the first protocol on Moca Chain to shift the basis of lending from **what you have** (collateral) to **who you are** (verifiable reputation). This paradigm shift unlocks DeFi for billions of underserved users.

**Traditional DeFi:**
```
Borrow $100 → Requires $150+ collateral
Capital efficiency: 67%
Accessible to: Only existing crypto holders
```

**Credo Protocol:**
```
Borrow $100 → Requires $50-150 collateral (score-dependent)
Capital efficiency: Up to 200%
Accessible to: Anyone with verifiable reputation
```

#### Privacy-Preserving Credit Scoring
Unlike traditional credit bureaus (Equifax, Experian) that harvest and sell sensitive user data, our model uses Zero-Knowledge Proofs via AIR Credential Services:

- **Prove income threshold** without revealing exact salary
- **Prove trading history** without exposing all transactions
- **Prove employment** without sharing employer details
- **Prove stable balance** without revealing account numbers

**Example ZK Proof:**
```
Claim: "My annual income is above $50,000"
Proof: ✓ Valid cryptographic proof
Data Shared: None - salary never leaves user's control
```

#### Composable Financial Identity
The on-chain credit score generated by Credo is not a siloed metric. It's a composable "money lego" that other dApps on Moca Chain can permissionlessly integrate:

- **Identity-gated trading** (higher leverage for high-score users)
- **Premium subscriptions** (auto-qualify based on score)
- **DAO governance** (weighted voting by reputation)
- **Undercollateralized NFT purchases**
- **Reputation-based insurance pools**

---

## 2. Technical Robustness & Implementation (30%)

The protocol consists of three core components working in synergy on the Moca Chain testnet.

### Architecture Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                        USER                                  │
│                    (Moca ID Wallet)                         │
└─────────────────┬───────────────────────────────────────────┘
                  │
                  │ 1. Login (AIR Account Services)
                  │
┌─────────────────▼───────────────────────────────────────────┐
│                   CREDO dAPP (FRONTEND)                      │
│              React/Next.js + Ethers.js                       │
│                                                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   Dashboard  │  │  Credential  │  │    Lending   │     │
│  │              │  │  Marketplace │  │      Pool    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└──────────────────────┬──────────────────┬──────────────────┘
                       │                  │
         2. Request VC │                  │ 5. Borrow/Lend
                       │                  │
┌──────────────────────▼─────────┐        │
│     CREDENTIAL ISSUERS          │        │
│  (AIR Credential Services SDK)  │        │
│                                 │        │
│  • Mock Exchange (CEX History)  │        │
│  • Mock Employer (Payroll)      │        │
│  • Mock Bank (Balance Proof)    │        │
└──────────────────┬──────────────┘        │
                   │                       │
     3. Issue VC   │                       │
     (ZK Proof)    │                       │
                   │                       │
┌──────────────────▼───────────────────────▼──────────────────┐
│              MOCA CHAIN (TESTNET)                            │
│                                                              │
│  ┌────────────────────────────┐  ┌────────────────────────┐ │
│  │  CreditScoreOracle.sol     │  │   LendingPool.sol      │ │
│  │                            │  │                        │ │
│  │  • Verify VC signatures    │  │  • Supply assets       │ │
│  │  • Calculate weighted      │  │  • Borrow assets       │ │
│  │    credit score            │◄─┤  • Query oracle for   │ │
│  │  • Store score on-chain    │  │    collateral factor   │ │
│  │    (mapped to Moca ID)     │  │  • Dynamic interest    │ │
│  └────────────────────────────┘  └────────────────────────┘ │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### Component 1: The Credo dApp (Frontend)

A user-friendly interface built with **React/Next.js** where users can:

1. **Seamless Login**
   - Click "Login with Moca ID"
   - AIR Account Services provides familiar popup authentication
   - User authenticated and connected in one click

2. **Credential Marketplace**
   - Visual grid of available credentials to claim
   - Examples:
     - 🏦 "Proof of CEX Trading History" (Binance/mock)
     - 💼 "Proof of Payroll" (Mock HR service)
     - 💰 "Proof of Stable Balance" (Mock bank)
     - 🎯 "Proof of On-Chain Activity" (Blockchain data)
   - Each credential shows: issuer trust score, score boost, and requirements

3. **Credit Score Dashboard**
   - Real-time on-chain credit score (0-1000)
   - Visual breakdown of contributing credentials
   - Score history graph
   - Recommendations to improve score

4. **Lending Interface**
   - **Supply Tab**: Lend assets to earn yield
   - **Borrow Tab**: Interactive slider to select borrow amount
     - Real-time calculation of required collateral based on user's score
     - Clear display of interest rate (score-dependent)
     - Liquidation threshold visualization

**Tech Stack:**
- Next.js 15 (Pages Router)
- React 19
- Ethers.js (Blockchain interaction)
- Tailwind CSS (UI styling)
- AIR Account Services SDK
- AIR Credential Services SDK

### Component 2: The Credit Score Oracle (Smart Contract)

**Contract:** `CreditScoreOracle.sol`

A Solidity smart contract deployed on Moca Chain testnet that serves as the trust layer for the protocol.

#### Key Functions:

```solidity
// Submit a new credential for verification
function submitCredential(
    bytes memory credentialData,
    bytes memory signature,
    address issuer
) external returns (uint256 newScore)

// Get user's current credit score
function getCreditScore(address user) 
    external view returns (uint256 score)

// Check if user's score is above threshold
function isScoreAboveThreshold(address user, uint256 threshold) 
    external view returns (bool)

// Get detailed score breakdown
function getScoreDetails(address user) 
    external view returns (
        uint256 totalScore,
        uint256 credentialCount,
        uint256 lastUpdated
    )
```

#### Verification Logic:

1. **Cryptographic Verification**
   ```
   • Verify VC signature matches registered issuer
   • Check credential hasn't expired
   • Ensure credential hasn't been used before (prevent replay)
   • Validate credential schema matches expected format
   ```

2. **Weighted Scoring Algorithm**
   ```
   Base Score = 500 (starting point)
   
   Credential Weights:
   • Proof of Income (High): +150 points
   • Proof of Stable Balance: +100 points
   • Proof of CEX History: +80 points
   • Proof of Employment: +70 points
   • Proof of On-Chain Activity: +50 points
   
   Multipliers:
   • Issuer Trust Score: 0.5x to 1.5x
   • Recency Decay: 1.0x (fresh) to 0.7x (6+ months old)
   • Diversity Bonus: +10% for each unique credential type
   
   Max Score: 1000
   Min Score: 0
   ```

3. **On-Chain Storage**
   ```solidity
   mapping(address => CreditProfile) public creditProfiles;
   
   struct CreditProfile {
       uint256 score;
       uint256 lastUpdated;
       uint256 credentialCount;
       mapping(bytes32 => bool) usedCredentials;
   }
   ```

#### Security Features:
- ✅ Non-upgradeable (trustless)
- ✅ Pausable (emergency only)
- ✅ Issuer registry with trust scores
- ✅ Credential expiration enforcement
- ✅ Replay attack prevention
- ✅ Gas-optimized storage patterns

### Component 3: The Lending Pool (Smart Contract)

**Contract:** `LendingPool.sol`

A lending pool inspired by Compound v2 with a critical innovation: **dynamic collateral factors based on credit scores**.

#### Key Functions:

```solidity
// Supply assets to the pool
function supply(uint256 amount) external

// Borrow assets from the pool
function borrow(uint256 amount) external

// Repay borrowed assets
function repay(uint256 amount) external

// Withdraw supplied assets
function withdraw(uint256 amount) external

// Liquidate undercollateralized position
function liquidate(address borrower) external
```

#### Core Innovation: Dynamic Collateralization

```solidity
function borrow(uint256 amount) external {
    // Query the Credit Score Oracle
    uint256 userScore = creditOracle.getCreditScore(msg.sender);
    
    // Calculate dynamic collateral factor
    uint256 collateralFactor = calculateCollateralFactor(userScore);
    
    // Score-based collateral requirements:
    // Score 900-1000: 50% collateral (borrow $100 with $50)
    // Score 700-899:  75% collateral
    // Score 500-699:  100% collateral
    // Score 300-499:  125% collateral
    // Score 0-299:    150% collateral (standard DeFi)
    
    uint256 requiredCollateral = (amount * collateralFactor) / 100;
    require(
        getUserCollateral(msg.sender) >= requiredCollateral,
        "Insufficient collateral for your credit score"
    );
    
    // Execute borrow...
}
```

#### Interest Rate Model

Interest rates are also credit-score dependent:

```
High Score (900+):   5% APR base
Medium Score (500-899): 8% APR base
Low Score (<500):    12% APR base

+ Utilization rate multiplier
```

#### Liquidation Protection

Users with high credit scores get better liquidation protection:
```
High Score: Liquidated at 80% health factor
Medium Score: Liquidated at 85% health factor  
Low Score: Liquidated at 90% health factor
```

---

## 3. User Experience & Design (20%)

The user journey is designed to be simple and empowering, abstracting away the underlying complexity.

### The "3-Click Loan" Flow

#### Click 1: Connect & Authenticate
```
User Action: Clicks "Login with Moca ID"
What Happens:
  → AIR Account Services popup appears
  → User authenticates with familiar Web3 SSO
  → Moca ID wallet connected
  → Redirected to personalized dashboard
  
User Sees: "Welcome back! Your current credit score: Building..."
Time: ~5 seconds
```

#### Click 2: Build Your Score
```
User Action: Clicks "Link Exchange Account" credential
What Happens:
  → Credential issuer's secure OAuth flow opens
  → User approves data access (read-only)
  → Issuer generates VC with ZK proof
  → VC submitted to CreditScoreOracle.sol
  → Score calculated and updated on-chain
  
User Sees: "Score updated! 500 → 680 (+180)"
Visual: Animated score counter, confetti effect
Time: ~30 seconds
```

#### Click 3: Access Capital
```
User Action: Moves slider to "Borrow $500"
What Happens:
  → Frontend queries LendingPool.sol
  → Contract queries CreditScoreOracle.sol for user's score
  → Dynamic collateral requirement calculated
  → Interface shows:
    • Required collateral: $375 (75% - based on 680 score)
    • Interest rate: 7.5% APR
    • Liquidation threshold: Clear visual bar
    • Monthly payment estimate
  
User Action: Clicks "Borrow Now"
What Happens:
  → One transaction to approve + borrow
  → Funds instantly available in wallet
  
User Sees: "Success! $500 borrowed. View in dashboard."
Time: ~15 seconds
```

**Total time from login to loan: ~50 seconds**

### Design Principles

1. **Progressive Disclosure**
   - Simple interface by default
   - Advanced options collapsed
   - "Learn more" tooltips for complex concepts

2. **Visual Trust Indicators**
   - Green scores (700+), yellow (500-699), red (<500)
   - Issuer badges with trust scores
   - Real-time collateral health meter

3. **Mobile-First**
   - Fully responsive design
   - Touch-optimized sliders and buttons
   - Works seamlessly on all devices

4. **Clear Financial Transparency**
   - No hidden fees
   - All costs shown upfront
   - Simple language (not DeFi jargon)

---

## 4. Privacy & Trustlessness (15%)

This is the cornerstone of Credo Protocol.

### User Sovereignty

The user is in **absolute control**:

- ✅ Users decide which credentials to request
- ✅ Users choose which credentials to hold
- ✅ Users select which credentials to share with the protocol
- ✅ No data is pulled without explicit consent
- ✅ Users can revoke credentials at any time

**Consent Flow:**
```
1. User requests credential from issuer
   → "Do you want to share your exchange history with [Issuer]?"
   
2. Issuer prepares credential
   → User receives VC in their wallet (private)
   
3. User submits to protocol
   → "Submit this credential to update your score?"
   → User explicitly approves transaction
```

### Zero-Knowledge Proofs

We heavily utilize the ZK capabilities of AIR Credential Services:

#### Example: Income Verification

**Without ZK (Traditional):**
```json
{
  "type": "IncomeProof",
  "salary": "$75,000",
  "employer": "Acme Corp",
  "account_number": "12345678"
}
```
⚠️ Sensitive data exposed on-chain

**With ZK (Credo Protocol):**
```json
{
  "type": "IncomeProof",
  "claim": "income_above_threshold",
  "threshold": "$50,000",
  "proof": "0x7f4a9b2c8e1d...", // ZK proof
  "public_inputs": ["threshold_met"]
}
```
✅ Salary remains private
✅ Employer remains private  
✅ Only the threshold check is public
✅ Cryptographically verifiable

#### More ZK Use Cases:

**Trading History:**
- Traditional: Share all trades, volumes, PnL
- ZK Proof: Prove "never liquidated" + "volume > $X" without revealing details

**Bank Balance:**
- Traditional: Share exact balance, account number, bank name
- ZK Proof: Prove "stable balance > $Y for 6 months" without revealing exact amount

**Employment:**
- Traditional: Share employment contract, duration, company name
- ZK Proof: Prove "employed > 2 years" without revealing employer

### Decentralization & Non-Custodial

**Smart Contract Guarantees:**
- ✅ All funds held in audited smart contracts
- ✅ No admin keys to move user funds
- ✅ No ability to censor users
- ✅ Credit scoring algorithm is open-source
- ✅ Can be community-governed via DAO (future)

**No Central Points of Failure:**
- Frontend hosted on IPFS/Arweave (future)
- Oracle data verified cryptographically
- Multiple credential issuers (no single issuer dependency)
- Upgrades require community consensus

### Data Minimization

Credo Protocol adheres to strict data minimization principles:

```
On-Chain Data:
├── User address ✅
├── Credit score (number) ✅
├── Credential count ✅
├── Last update timestamp ✅
└── NO personal data ✅

Off-Chain Data:
├── Credential VCs (user's wallet only) 🔒
├── ZK proofs (ephemeral) 🔒
└── No centralized database ✅
```

---

## 5. Potential Impact & Scalability (10%)

### Immediate Impact

**Unlocking Capital for Billions:**
- Current DeFi lending: ~$20B TVL, requires over-collateralization
- Undercollateralized lending market: **$10+ trillion** globally
- Credo's addressable market: Crypto-native users ready for DeFi credit

**Real-World Scenarios:**

1. **Crypto Trader**
   - Has $10K in CEX, wants to borrow $5K for an opportunity
   - Traditional DeFi: Must withdraw $10K+ to Ethereum, use as collateral
   - Credo: Proves CEX holdings via VC, borrows $5K with $3.75K collateral

2. **DAO Contributor**
   - Earns $3K/month in crypto via DAO work
   - Needs $2K for an emergency
   - Traditional: No option (no collateral)
   - Credo: Proves income via VC, borrows with 75% collateral

3. **Emerging Market User**
   - Has stable payroll, underbanked region
   - Wants to participate in DeFi
   - Traditional: Excluded entirely
   - Credo: First access to undercollateralized credit

### Scalability Pathway

#### Phase 1: Hackathon (Oct 12-19, 2025) ✅
**Goal:** Prove the concept
- Build core protocol (Oracle + Lending Pool)
- Create 2-3 mock credential issuers
- Deploy on Moca Chain testnet
- Demonstrate end-to-end flow

**Success Metrics:**
- Working smart contracts
- Functional frontend
- Complete user journey demo
- Score calculation live on testnet

#### Phase 2: Post-Hackathon (Q4 2025)
**Goal:** Expand issuer ecosystem
- Create open-source **Issuer SDK**
- Partner with 5-10 real issuers:
  - CEXs (Binance, OKX, Bybit)
  - Payroll providers (Deel, Remote)
  - Blockchain analytics (Nansen, Dune)
  - Gaming platforms (Moca gaming partners)
- Audit smart contracts (CertiK, OpenZeppelin)
- Launch on Moca Chain mainnet

**Success Metrics:**
- 10+ credential types available
- $1M+ TVL
- 500+ active borrowers
- <0.5% default rate

#### Phase 3: Ecosystem Expansion (2026)
**Goal:** Become foundational identity layer
- **Issuer SDK marketplace**: Anyone can become a credential issuer
- **Credit Score API**: Other dApps integrate Credo scores
- **Cross-chain expansion**: Bridge scores to other chains
- **Advanced ZK**: Fully private credentials

**Use Cases Beyond Lending:**
```
┌─────────────────────────────────────────────┐
│        CREDO CREDIT SCORE LAYER             │
│       (Foundational Identity Primitive)     │
└──────────────┬──────────────────────────────┘
               │
       ┌───────┴───────┐
       │               │
       ▼               ▼
  ┌─────────┐    ┌──────────┐
  │ Lending │    │Insurance │
  └─────────┘    └──────────┘
       │               │
       ▼               ▼
  ┌─────────┐    ┌──────────┐
  │ Margin  │    │   DAO    │
  │ Trading │    │Governance│
  └─────────┘    └──────────┘
       │               │
       ▼               ▼
  ┌─────────┐    ┌──────────┐
  │ Rentals │    │  Hiring  │
  │ (NFTs)  │    │ Platform │
  └─────────┘    └──────────┘
```

**Examples:**
- **Margin Trading**: Higher leverage for high-score users
- **Insurance**: Risk-based premium pricing
- **DAO Governance**: Reputation-weighted voting
- **NFT Rentals**: Undercollateralized NFT borrowing
- **Hiring Platforms**: Verified reputation for Web3 work

#### Phase 4: Long-Term Vision (2027+)
**Goal:** Global financial inclusion
- Partner with 100+ issuers globally
- Integrate real-world identity (KYC + privacy)
- $1B+ TVL
- Cross-chain credit score portability
- Tokenomics via **$CREDO** token

### Impact Metrics

**Financial Inclusion:**
- Serve 100K+ users by 2026
- 60% from emerging markets
- $500M+ in undercollateralized loans issued

**Capital Efficiency:**
```
Traditional DeFi: $150 collateral → $100 loan (67% efficient)
Credo (High Score): $50 collateral → $100 loan (200% efficient)
Improvement: 3x more capital efficient
```

**Privacy Leadership:**
- First major DeFi protocol with ZK-based credit
- Set standard for privacy-preserving identity
- 100% of credentials use ZK proofs by Phase 3

---

## Why Moca Chain?

Credo Protocol is built exclusively for Moca Chain because:

1. **AIR Kit Integration**: Native support for Account & Credential Services
2. **Gaming/Consumer Focus**: Moca's ecosystem attracts mainstream users, not just DeFi degens
3. **Animoca Ecosystem**: Access to 400+ portfolio companies as potential credential issuers
4. **Low Fees**: Enables microcredentials and frequent score updates
5. **Culture of Innovation**: Moca Chain is pioneering identity-native applications

---

## Conclusion

Credo Protocol represents a paradigm shift in DeFi lending. By leveraging the Moca Network's AIR Kit, we're building the first truly identity-backed lending protocol that is:

- ✅ **More Capital Efficient** than traditional DeFi
- ✅ **More Private** than traditional credit systems
- ✅ **More Inclusive** than both TradFi and DeFi
- ✅ **Composable** as a foundational identity layer

We're not just building a lending protocol. We're building the **trust infrastructure for the new digital economy**.

---

## Resources

- **GitHub**: [Credo-Protocol/Credo-Protocol](https://github.com/Credo-Protocol/Credo-Protocol)
- **Documentation**: See `PRD.md` for detailed hackathon execution plan
- **Moca Chain**: [moca.network](https://moca.network)
- **AIR Kit Docs**: [docs.moca.network](https://docs.moca.network)

---

**Built with ❤️ for the Moca Chain Hackathon**

